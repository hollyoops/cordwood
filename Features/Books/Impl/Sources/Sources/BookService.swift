import BooksContracts
import Combine
import Foundation

struct Mocks {
    static let ALL_BOOKS: [Book] = [
        .init(name: "Education one", category: .education, publishDate: .q1),
        .init(name: "Education Two", category: .education, publishDate: .q3),
        .init(name: "Master your relation of GF", category: .emotion, publishDate: .q1),
        .init(name: "How to avoid PUA", category: .emotion, publishDate: .q1),
        .init(name: "Master english in one day", category: .language, publishDate: .q2),
        .init(name: "Follow me to learn japaneses", category: .language, publishDate: .q2),
        .init(name: "My GrandFather", category: .other, publishDate: .q2),
        .init(name: "AWS in action", category: .other, publishDate: .q3),
    ]
}

struct AllBooksService {
  static func getAllBooks() -> AnyPublisher<[Book], BookError> {
      Deferred {
          Future { promise in
              DispatchQueue.main.asyncAfter(deadline: .now() + 2) {
                  promise(.success(Mocks.ALL_BOOKS))
              }
          }
      }.eraseToAnyPublisher()
  }
}
